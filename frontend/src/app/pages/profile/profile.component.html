<!-- profile.component.html -->
<div class="profile-container" *ngIf="!loading">
  <!-- Error Message -->
  <div *ngIf="error" class="error-message">{{ error }}</div>

  <!-- Profile Section -->
  <div *ngIf="profile" class="profile-card">
    <h2>Welcome, {{ profile.name }}</h2>
    <p><strong>Email:</strong> {{ profile.email }}</p>

    <!-- Profile Picture Section -->
    <div class="profile-picture">
      <ng-container *ngIf="profile.profile_picture; else noPic">
        <img [src]="profile.profile_picture" alt="Profile Picture" />
      </ng-container>
      <ng-template #noPic>
        <div class="default-icon">
          <i class="fa fa-user-circle fa-5x"></i>
          <p>No profile picture available.</p>
        </div>
      </ng-template>
    </div>

    <!-- Upload New Picture -->
    <div class="upload-section">
      <label for="profilePicture" class="upload-label">Upload New Profile Picture</label>
      <input type="file" id="profilePicture" (change)="onUploadProfilePicture($event)" />
    </div>

    <button class="logout-btn" (click)="logout()">Logout</button>
  </div>
</div>

<!-- Wishlist Section -->
<div class="wishlist-wrapper">
  <h3>Your Wishlist</h3>

  <!-- Wishlist States -->
  <div *ngIf="wishlistLoading" class="loading-spinner">
    <p>Loading wishlist...</p>
  </div>

  <div *ngIf="wishlistError" class="error-message">
    <p>{{ wishlistError }}</p>
  </div>

  <!-- Wishlist Items -->
  <div *ngIf="!wishlistLoading && !wishlistError && wishlistItems.length > 0" class="wishlist-container">
    <div class="wishlist-card" *ngFor="let item of wishlistItems">
      <img [src]="item.image_url || 'https://via.placeholder.com/150?text=Product'" alt="{{ item.name }}" />
      <h3>{{ item.name }}</h3>
      <p>{{ item.description }}</p>
      <strong>${{ item.price }}</strong>
      <button (click)="removeFromWishlist(item)">Remove</button>
    </div>
  </div>

  <!-- Empty Wishlist -->
  <div *ngIf="!wishlistLoading && !wishlistError && wishlistItems.length === 0">
    <p>Your wishlist is empty.</p>
  </div>
</div>

<!-- Global Loading -->
<div *ngIf="loading" class="global-loading">
  <p>Loading profile...</p>
</div>
